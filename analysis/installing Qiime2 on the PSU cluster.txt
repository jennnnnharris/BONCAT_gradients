#installing Qiime2 on the PSU cluster

#you will need
## Roar collab access

#step are
## 1. start roar interactive session
## 2. make a conda environment
## 3. install software

####### logging on and starting session ############
#logon to PSU roar collab using your username
ssh jeh6121@submit.hpc.psu.edu
#start interactive job
salloc -N 1 -n 4 --mem-per-cpu=1024 -t 1:00:00
# go to work directory
cd /storage/group/ltb5167/default/JennHarris/BONCAT_16S


##### install software ###########
# start conda
module load anaconda3
# create conda environment
conda create -n qiime2-env -y
#start conda again
module load anaconda3
# add wget
conda install wget
#load software
# get qiime2
wget https://data.qiime2.org/distro/core/qiime2-2022.2-py38-linux-conda.yml
conda env create -n qiime2-env --file qiime2-2022.2-py38-linux-conda.yml

##### check it's working ###########
# view your packages in your conda environment
/storage/home/jeh6121/.conda/envs/qiime2-env
# qiime2 should be working now test it by trying a command
qiime tools import


##### for future #######
# now every time you want to use qiime you start your conda environment that has qiime installed
#start conda
module load anaconda3
conda activate qiime2-env
